YUI().use("base","node","anim","event-touch","transition",function(a){console.log("Hello world");var b={},c="Welcome, to the twitter reader demo",d="hidden",e=".twitter-timeline",f=".navbar-bottom",g="slide-bottonbar-show";b.init=function(){window.SpeechSynthesisUtterance?(window.speechSynthesis.cancel(),b.speechSynthesisUtteranceMsg=new window.SpeechSynthesisUtterance,b.lastTweetCollectionSize=0,b.actualTweetNode=null,b.lastTweetReadedIndex=0,b.twitterLoadAction(),b.listenReadVoice.call(b,c,function(){})):b.showNotSupportedBrowserAction()},b.showMainPageAction=function(){var b=a.one(f),c=a.one(".containerx");a.all(".preloader-bar .preloader-chunk").each(function(a){a.addClass("slide-up-trans")}),a.one(".preloader-bar").addClass(d),b.removeClass(d),b.addClass(g),a.one(".landing-page-container").transition({easing:"ease-out",duration:.75,opacity:"0"},function(){this.addClass(d),c.removeClass(d),c.transition({easing:"ease-out",duration:.75,opacity:"1"},function(){})})},b.showNotSupportedBrowserAction=function(){a.one(".text-hero").addClass(d),a.one(".non-supported-browser").removeClass(d)},b.setupTwitterTimelineHelper=function(){var b=a.one(e),c=window.innerHeight-60;b.setAttribute("height",c)},b.twitterLoadAction=function(){b.setupTwitterTimelineHelper(),!function(a,b,c){{var d,e=a.getElementsByTagName(b)[0];/^http:/.test(a.location)?"http":"https"}a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="lib/twitter/widgets.js",e.parentNode.insertBefore(d,e))}(document,"script","twitter-wjs"),$(e).length&&(interval_timeline=!1,interval_timeline=setInterval(function(){$(e).hasClass("twitter-timeline-rendered")&&$(e).width()>10&&(clearInterval(interval_timeline),b.twitterOnLoadHandle())},200))},b.twitterOnLoadHandle=function(){b.iframeBodyNode=b.getIframeBodyNode(),b.addCustomCss(),b.initialRenderAction(),b.bindEvents(),b.addBottomNavBarBehavior(),b.showMainPageAction()},b.addBottomNavBarBehavior=function(){var c=b.iframeBodyNode.one(".stream");c.on("scroll",function(){var d=c.get("scrollTop"),e=c.get("offsetHeight"),h=b.iframeBodyNode.one("button.load-more").get("offsetTop"),i=h-e,j=a.one(f);d>=i?(j.removeClass(g),j.addClass("slide-hide")):(j.removeClass("slide-hide"),j.addClass(g))})},b.listenReadVoice=function(a,c){console.log(a),b.speechSynthesisUtteranceMsg.onend=function(){c&&c()},b.speechSynthesisUtteranceMsg.onstart=function(){},window.speechSynthesis.cancel(),b.speechSynthesisUtteranceMsg.text=a,window.speechSynthesis.speak(b.speechSynthesisUtteranceMsg)},b.addCustomCss=function(){var a=document.createElement("link");a.href=src="assets/styles/twitteriframe-min.css",a.rel="stylesheet",a.type="text/css",frames["twitter-widget-0"].document.body.appendChild(a)},b.getIframeBodyNode=function(){var b,c=a.one("iframe"),d=c.get("contentWindow").get("document");return b=d.one("body")},b.bindEvents=function(){twttr.events.bind("loadMore",function(){b.loadMoreAction()}),twttr.events.bind("newTweets",function(){b.newTweetsAction()}),b.bindSharingEvents();var c=[".navbar-bottom .previous",".navbar-bottom .next",".navbar-bottom .rewind"];a.each(c,function(b){a.one(b).on("touchstart",function(a){var b=a.currentTarget;b.addClass("touch-hover"),b.once("touchend",function(){b.removeClass("touch-hover")})})}),a.one(".topbar .share").on("touchstart",function(a){var b=a.currentTarget;b.addClass("touch-hover-image"),b.once("touchend",function(){b.removeClass("touch-hover-image")})}),a.one(".navbar-bottom .next").on("click",b.readNextTweetAction),a.one(".navbar-bottom .previous").on("click",b.readPreviousTweetAction),a.one(".navbar-bottom .rewind").on("click",b.readInitialTweetAction),a.one(".topbar .share").on("click",function(){$("#myModal").modal("show")})},b.bindSharingEvents=function(){var c=(b.iframeBodyNode,a.one(".modal-body")),d=c.all(".list-group-item");d.each(function(a){a.on("click",function(a){var c=a.target.getAttribute("data-share");b.shareAction(c),$("#myModal").modal("hide")})})},b.shareAction=function(a){var b="";"feedback"===a?b="https://twitter.com/intent/tweet?original_referer=http%3A%2F%2Flocalhost%2Ftwitterapp%2F&screen_name=dariel_noel":"twitter"===a?b="https://twitter.com/intent/tweet?original_referer=http%3A%2F%2Flocalhost%2Ftwitterapp%2F&url=http%3A%2F%2Fvoicereader.github.io&text=How%20you%20can%20read%20tweets%20without%20reading?%20Take%20a%20look%20at%20":"googleplus"===a?b="https://plus.google.com/share?url=http%3A%2F%2Fvoicereader.github.io%2F":"facebook"===a&&(b="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fvoicereader.github.io"),""!==b&&window.open(b,"_blank")},b.initialRenderAction=function(){var a=b.iframeBodyNode;tweetActionCollection=a.all(".tweet-actions"),tweetCollectionSize=tweetActionCollection.size();for(var c=0;tweetCollectionSize>c;c++)b.addVoiceReadBehavior(tweetActionCollection.item(c));b.lastTweetCollectionSize=tweetCollectionSize},b.loadMoreAction=function(){for(var a=b.iframeBodyNode,c=a.all(".tweet-actions"),d=c.size(),e=b.lastTweetCollectionSize,f=e;d>f;f++)b.addVoiceReadBehavior(c.item(f));b.lastTweetCollectionSize=d},b.newTweetsAction=function(){for(var a=b.iframeBodyNode,c=a.all(".tweet-actions"),d=c.size(),e=b.lastTweetCollectionSize,f=d-e,g=0;f>g;g++)b.addVoiceReadBehavior(c.item(g));b.lastTweetCollectionSize=d},b.addVoiceReadBehavior=function(c){var d='<li class="voice-read-tweet"><a><i class="ic-mask ic-con"></i></a><b>Reply</b></li>',e=a.Node.create(d);c.appendChild(e),e.on("click",b.voiceReadNodeClickHandle)},b.voiceReadNodeClickHandle=function(a){var c=a.currentTarget.get("parentNode").get("parentNode").get("parentNode");a.stopPropagation(),b.readTweetHelper.call(this,c,function(){})},b.getTweetByIndexHelper=function(a){var c,d=b.iframeBodyNode,e=d.one(".stream ol"),f=e.get("children"),g=f.size();return a>=0&&g>a&&(c=f.item(a)),c},b.readInitialTweetAction=function(){{var a;b.actualTweetNode}a=b.getTweetByIndexHelper(0),b.scrollToHelper(a),b.readTweetHelper(a,function(){})},b.readNextTweetAction=function(){var a,c=b.actualTweetNode;c?(a=c.get("nextSibling").get("nextSibling"),"component:tweet"!==a.getAttribute("data-scribe")&&(a=b.getTweetByIndexHelper(0))):a=b.getTweetByIndexHelper(0),b.scrollToHelper(a),b.readTweetHelper(a,function(){})},b.readPreviousTweetAction=function(a){{var c,d=b.actualTweetNode;a.currentTarget}d?(c=d.get("previousSibling").get("previousSibling"),c&&"component:tweet"===c.getAttribute("data-scribe")||(c=b.getTweetByIndexHelper(0))):c=b.getTweetByIndexHelper(0),b.scrollToHelper(c),b.readTweetHelper(c,function(){})},b.scrollToHelper=function(c){var d,e=b.iframeBodyNode.one(".stream"),f=(e.get("scrollTop"),c.get("offsetTop"));d=new a.Anim({node:e,to:{scrollTop:f},duration:.5}),d.run()},b.readTweetHelper=function(a,c){var d,e,f=a.one(".e-entry-content .e-entry-title");d=f.cloneNode(!0),e=d.all("a"),e.each(function(a){b.clearLinkNode(a)}),b.clearActualTweetNodeHelper();var g=a.one(".tweet-actions"),h=a.one(".voice-read-tweet i");g.addClass("show-helper"),h.addClass("ic-reading"),b.actualTweetNode=a,b.listenReadVoice(d.get("text"),c)},b.clearActualTweetNodeHelper=function(){var a=b.actualTweetNode;if(a){var c=a.one(".tweet-actions"),d=a.one(".voice-read-tweet i");c.removeClass("show-helper"),d.removeClass("ic-reading"),d.addClass("ic-readed")}},b.clearLinkNode=function(c){var d="",e=c.getAttribute("data-scribe");if("element:mention"===e)d=c.get("text");else if("element:hashtag"===e)d=c.get("text");else if("element:url"===e){var f=c.getAttribute("data-expanded-url");f?(d=b.clearUrlHelper(f,""),d=", "+b.getLinkReadMoreMessageHelper()+" "+d):d=""}var g=a.Node.create("<span>"+d+"</span>");c.replace(g)},b.clearUrlHelper=function(a,b){var c=a.replace(new RegExp(/\b(https?|ftp|file):\/\/(www.)?/),b);return c=c.split("/")[0]},b.getLinkReadMoreMessageHelper=function(){var a=APP_CONFIG.readMoreMessageCollection,c=a.length,d=b.ramdomizeHelper(0,c-1);return a[d]},b.ramdomizeHelper=function(a,b){var c;return b++,c=Math.floor(Math.random()*(b-a))+a},b.startReadTweetCollectionAction=function(){var a=b.lastTweetReadedIndex;a>0||b.readTweetCollectionHelper(a)},b.readTweetCollectionHelper=function(a){var c=b.lastTweetCollectionSize;a>=0&&c>a&&b.readTweetAction(a,function(){b.lastTweetReadedIndex++,b.readTweetCollectionHelper(b.lastTweetReadedIndex)})},b.readTweetAction=function(a,c){var d=b.iframeBodyNode,e=d.one(".stream ol"),f=e.get("children"),g=f.size();a>=0&&g>a&&b.readTweetHelper(f.item(a),c)},b.init()});